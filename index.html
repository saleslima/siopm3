<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAsPjA0R4ee9GAMLmqbHDPg15gh44sVAgM&libraries=geometry" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Login Screen -->
        <div id="loginScreen">
            <img src="LOGO.PNG" alt="COPOM Logo" class="copom-logo">
            <h1>COPOM OFF</h1>
            <div class="button-group-main">
                <button id="btnAdmin" class="btn-main-large">üõ°Ô∏è Admin</button>
                <button id="btnCadastro" class="btn-main-large">üìã Cadastro</button>
                <button id="btnUsuario" class="btn-main-large">üë§ Usu√°rio</button>
            </div>
        </div>

        <!-- Password Screen for Admin -->
        <div id="adminPasswordScreen" style="display: none;">
            <img src="LOGO.PNG" alt="COPOM Logo" class="copom-logo">
            <h1>Acesso Admin</h1>
            <form id="adminPasswordForm">
                <div class="form-group">
                    <label for="adminPassword">Senha</label>
                    <input type="password" id="adminPassword" placeholder="Senha Administrativa" required>
                </div>
                <button type="submit" class="btn-cadastro">Entrar</button>
                <button type="button" id="btnBackFromAdminPassword" class="btn-secondary">Voltar</button>
            </form>
            <div id="adminPasswordMessage" class="message"></div>
        </div>

        <!-- Admin Dashboard -->
        <div id="adminScreen" style="display: none;">
            <img src="LOGO.PNG" alt="COPOM Logo" class="copom-logo">
            <h1>Administra√ß√£o</h1>
            <div style="background: #fafafa; padding: 20px; border-radius: 8px; border: 1px solid #ddd; max-width: 600px; margin: 0 auto;">
                <h3>Gerar Relat√≥rio de Ocorr√™ncias</h3>
                
                <div class="form-group">
                    <label>Per√≠odo</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <label style="font-size: 12px; display: block; margin-bottom: 5px;">Data Inicial</label>
                            <input type="datetime-local" id="adminDataInicio" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div>
                            <label style="font-size: 12px; display: block; margin-bottom: 5px;">Data Final</label>
                            <input type="datetime-local" id="adminDataFim" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="adminStatusFilter">Status das Ocorr√™ncias</label>
                    <select id="adminStatusFilter" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="TODAS">TODAS (Encerradas e Pendentes)</option>
                        <option value="ENCERRADAS">APENAS ENCERRADAS</option>
                        <option value="PENDENTES">APENAS GERADAS (Pendentes/Em Atendimento)</option>
                    </select>
                </div>

                <button id="btnGerarRelatorioAdmin" class="btn-cadastro" style="width: 100%; margin-top: 10px;">üìÑ Gerar PDF</button>
                
                <div style="margin-top: 20px; border-top: 1px solid #ddd; padding-top: 20px;">
                    <h3>Gest√£o de Mapas</h3>
                    <p style="font-size: 12px; color: #666; margin-bottom: 10px;">Sincronize os arquivos GeoJSON locais com o banco de dados Firebase para permitir carregamento din√¢mico.</p>
                    <button id="btnSyncMapas" class="btn-secondary" style="width: 100%;">‚òÅÔ∏è Sincronizar Mapas (Upload)</button>
                    <div id="syncStatus" style="font-size: 12px; margin-top: 5px; color: #666; font-weight: 600;"></div>
                </div>

                <div style="margin-top: 20px; border-top: 1px solid #ddd; padding-top: 20px;">
                    <h3>Gest√£o de Naturezas</h3>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <input type="text" id="novaNaturezaCodigo" placeholder="C√≥digo (ex: C04)" style="flex: 0 0 100px; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <input type="text" id="novaNaturezaDescricao" placeholder="Descri√ß√£o" style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <button id="btnAdicionarNatureza" class="btn-cadastro" style="padding: 10px 20px;">Adicionar</button>
                    </div>
                    <div id="listaNaturezas" style="max-height: 200px; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; padding: 10px; background: white;"></div>
                </div>

                <div style="margin-top: 20px; border-top: 1px solid #ddd; padding-top: 20px;">
                    <h3>Gest√£o de Status Finais</h3>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <input type="text" id="novoStatusFinal" placeholder="Novo Status Final" style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <button id="btnAdicionarStatusFinal" class="btn-cadastro" style="padding: 10px 20px;">Adicionar</button>
                    </div>
                    <div id="listaStatusFinais" style="max-height: 200px; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; padding: 10px; background: white;"></div>
                </div>

                <div style="margin-top: 20px; border-top: 1px solid #ddd; padding-top: 20px;">
                    <h3>Gr√°fico de Naturezas Finais por BTL</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-size: 12px;">Data Inicial</label>
                            <input type="datetime-local" id="chartDataInicio" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-size: 12px;">Data Final</label>
                            <input type="datetime-local" id="chartDataFim" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                    </div>
                    <button id="btnGerarGrafico" class="btn-cadastro" style="width: 100%; margin-bottom: 10px;">üìä Gerar Gr√°fico</button>
                    <div id="chartContainer" style="background: white; padding: 20px; border: 1px solid #ddd; border-radius: 4px; min-height: 400px;">
                        <p style="text-align: center; color: #999;">Clique em "Gerar Gr√°fico" para visualizar os dados</p>
                    </div>
                </div>

                <button id="btnBackFromAdmin" class="btn-secondary" style="width: 100%; margin-top: 10px;">Voltar</button>
            </div>
            <div id="adminMessage" class="message"></div>
        </div>

        <!-- Password Screen for Cadastro -->
        <div id="cadastroPasswordScreen" style="display: none;">
            <img src="LOGO.PNG" alt="COPOM Logo" class="copom-logo">
            <h1>Acesso ao Cadastro</h1>
            <form id="cadastroPasswordForm">
                <div class="form-group">
                    <label for="cadastroPassword">Senha</label>
                    <input type="password" id="cadastroPassword" placeholder="Dica: DAQTA" required>
                </div>
                <button type="submit" class="btn-cadastro">Entrar</button>
                <button type="button" id="btnBackFromCadastroPassword" class="btn-secondary">Voltar</button>
            </form>
            <div id="cadastroPasswordMessage" class="message"></div>
        </div>

        <!-- User Login Screen -->
        <div id="userLoginScreen" style="display: none;">
            <img src="LOGO.PNG" alt="COPOM Logo" class="copom-logo">
            <h1>Login Usu√°rio</h1>
            <form id="userLoginForm">
                <div class="form-group">
                    <label for="loginCpfRe">CPF/RE</label>
                    <input type="text" id="loginCpfRe" required>
                </div>
                <div class="form-group">
                    <label for="loginServico">Servi√ßo</label>
                    <select id="loginServico" required>
                        <option value="">Selecione...</option>
                        <option value="RADIO PATRULHA">RADIO PATRULHA</option>
                        <option value="BOMBEIRO">BOMBEIRO</option>
                        <option value="TRANSITO">TR√ÇNSITO</option>
                        <option value="CHOQUE">CHOQUE</option>
                        <option value="AMBIENTAL">AMBIENTAL</option>
                        <option value="SAMU/192">SAMU/192</option>
                        <option value="BAEP">BAEP</option>
                        <option value="ESPECIALIDADES">ESPECIALIDADES</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="loginPerfil">Fun√ß√£o</label>
                    <select id="loginPerfil" required>
                        <option value="">Selecione...</option>
                    </select>
                </div>
                <div class="form-group" id="paFieldGroup">
                    <label for="loginPA" id="paLabel">P.A</label>
                    <select id="loginPA" required>
                        <option value="">Selecione...</option>
                    </select>
                </div>
                <button type="submit" class="btn-cadastro">Entrar</button>
                <button type="button" id="btnBackFromUserLogin" class="btn-secondary">Voltar</button>
            </form>
            <div id="userLoginMessage" class="message"></div>
        </div>

        <!-- Cadastro Form (original) -->
        <div id="cadastroScreen" style="display: none;">
            <img src="LOGO.PNG" alt="COPOM Logo" class="copom-logo">
            <h1>Cadastro</h1>
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button id="btnNovoCadastro" class="btn-cadastro" style="flex: 1;">Novo Cadastro</button>
                <button id="btnUsuarios" class="btn-secondary" style="flex: 1;">Usu√°rios</button>
            </div>
            
            <!-- Cadastro Form -->
            <div id="cadastroFormContainer">
            <form id="cadastroForm">
                <div class="form-group">
                    <label for="tipo">Tipo</label>
                    <select id="tipo" required>
                        <option value="">Selecione...</option>
                        <option value="CIVIL">CIVIL</option>
                        <option value="MILITAR">MILITAR</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="servico">Servi√ßo</label>
                    <select id="servico" required>
                        <option value="">Selecione...</option>
                        <option value="RADIO PATRULHA">RADIO PATRULHA</option>
                        <option value="BOMBEIRO">BOMBEIRO</option>
                        <option value="TRANSITO">TR√ÇNSITO</option>
                        <option value="CHOQUE">CHOQUE</option>
                        <option value="AMBIENTAL">AMBIENTAL</option>
                        <option value="SAMU/192">SAMU/192</option>
                        <option value="BAEP">BAEP</option>
                        <option value="ESPECIALIDADES">ESPECIALIDADES</option>
                    </select>
                </div>
                
                <!-- Campos para Civil -->
                <div id="civilFields" class="conditional-fields" style="display: none;">
                    <div class="form-group">
                        <label for="cpf">CPF</label>
                        <input type="text" id="cpf" maxlength="14">
                    </div>
                    <div class="form-group">
                        <label for="nomeCompleto">Nome Completo</label>
                        <input type="text" id="nomeCompleto">
                    </div>
                    <div class="form-group">
                        <label>Fun√ß√£o(√µes)</label>
                        <div id="funcoesCivil" style="display: flex; flex-direction: column; gap: 8px; padding: 10px; background: white; border: 1px solid #ddd; border-radius: 4px;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoCivil" value="ATENDENTE" style="cursor: pointer;">
                                <span>ATENDENTE</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoCivil" value="DESPACHADOR" style="cursor: pointer;">
                                <span>DESPACHADOR</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoCivil" value="SUPERVISOR" style="cursor: pointer;">
                                <span>SUPERVISOR</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoCivil" value="ATENDENTE COBOM" style="cursor: pointer;">
                                <span>ATENDENTE COBOM</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoCivil" value="DESPACHADOR COBOM" style="cursor: pointer;">
                                <span>DESPACHADOR COBOM</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoCivil" value="SUPERVISOR COBOM" style="cursor: pointer;">
                                <span>SUPERVISOR COBOM</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Campos para Militar -->
                <div id="militarFields" class="conditional-fields" style="display: none;">
                    <div class="form-group">
                        <label for="re">RE</label>
                        <input type="text" id="re" placeholder="DIGITE COM D√çGITO">
                    </div>
                    <div class="form-group">
                        <label for="graduacao">Gradua√ß√£o</label>
                        <select id="graduacao">
                            <option value="">Selecione...</option>
                            <option value="CEL PM">CEL PM</option>
                            <option value="TEN CEL PM">TEN CEL PM</option>
                            <option value="MAJ PM">MAJ PM</option>
                            <option value="CAP PM">CAP PM</option>
                            <option value="1¬∫ TEN PM">1¬∫ TEN PM</option>
                            <option value="2¬∫ TEN PM">2¬∫ TEN PM</option>
                            <option value="SUBTEN PM">SUBTEN PM</option>
                            <option value="1¬∫ SGT PM">1¬∫ SGT PM</option>
                            <option value="2¬∫ SGT PM">2¬∫ SGT PM</option>
                            <option value="3¬∫ SGT PM">3¬∫ SGT PM</option>
                            <option value="CB PM">CB PM</option>
                            <option value="SD PM 1¬™ CL">SD PM 1¬™ CL</option>
                            <option value="SD PM 2¬™ CL">SD PM 2¬™ CL</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="nomeGuerra">Nome Guerra</label>
                        <input type="text" id="nomeGuerra">
                    </div>
                    <div class="form-group">
                        <label>Fun√ß√£o(√µes)</label>
                        <div id="funcoesMilitar" style="display: flex; flex-direction: column; gap: 8px; padding: 10px; background: white; border: 1px solid #ddd; border-radius: 4px;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoMilitar" value="ATENDENTE" style="cursor: pointer;">
                                <span>ATENDENTE</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoMilitar" value="DESPACHADOR" style="cursor: pointer;">
                                <span>DESPACHADOR</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoMilitar" value="SUPERVISOR" style="cursor: pointer;">
                                <span>SUPERVISOR</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoMilitar" value="ATENDENTE COBOM" style="cursor: pointer;">
                                <span>ATENDENTE COBOM</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoMilitar" value="DESPACHADOR COBOM" style="cursor: pointer;">
                                <span>DESPACHADOR COBOM</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="funcaoMilitar" value="SUPERVISOR COBOM" style="cursor: pointer;">
                                <span>SUPERVISOR COBOM</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="btn-cadastro">Cadastro</button>
            </form>
            <div id="message" class="message"></div>
            </div>
            
            <!-- Usuarios List -->
            <div id="usuariosContainer" style="display: none;">
                <div style="margin-bottom: 20px;">
                    <input type="text" id="searchUsuario" placeholder="Pesquisar por RE ou CPF..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
                </div>
                <div id="usuariosList" style="max-height: 500px; overflow-y: auto;"></div>
            </div>
            
            <button id="btnBackFromCadastro" class="btn-secondary" style="margin-top: 20px;">Voltar</button>
        </div>

        <!-- User Dashboard -->
        <div id="userDashboard" style="display: none;">
            <img src="LOGO.PNG" alt="COPOM Logo" class="copom-logo">
            <h1>Bem-vindo</h1>
            <div id="userInfo" class="user-info"></div>
            <button id="btnLogout" class="btn-secondary">Sair</button>
        </div>

        <!-- Dispatcher Screen -->
        <div id="dispatcherScreen" style="display: none;">
            <div class="dispatcher-header">
                <h1>Despachador - Ocorr√™ncias por BTL</h1>
                <div id="dispatcherInfo" class="user-info"></div>
                <div class="vtr-cadastro-inline">
                    <input type="text" id="vtrCadastroInput" placeholder="Digite a VTR">
                    <button id="btnCadastrarVTR" class="btn-cadastro">Cadastrar VTR</button>
                </div>
            </div>
            <div class="dispatcher-layout-three">
                <div id="vtrEmpenhadas" class="vtr-panel-left">
                    <h2>VTRs Empenhadas</h2>
                    <div id="vtrEmpenhadasContent">
                        <p class="no-vtrs">Nenhuma VTR empenhada</p>
                    </div>
                </div>
                <div id="dispatcherOcorrencias" class="dispatcher-main-center">
                    <h2>Ocorr√™ncias Pendentes</h2>
                    <div id="dispatcherContent"></div>
                </div>
                <div id="vtrDisponiveis" class="vtr-panel-right">
                    <h2>VTRs Dispon√≠veis</h2>
                    <div id="vtrDisponiveisContent">
                        <p class="no-vtrs">Nenhuma VTR dispon√≠vel</p>
                    </div>
                </div>
            </div>
            <button id="btnLogoutDispatcher" class="btn-secondary" style="margin-top: 20px;">Sair</button>
        </div>

        <!-- Modal for Occurrence Details -->
        <div id="ocorrenciaModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="ocorrenciaModalContent"></div>
            </div>
        </div>

        <!-- Attendance Form -->
        <div id="attendanceScreen" style="display: none;">
            <div id="lastOccurrenceDisplay" class="last-occurrence-display" style="display: none;"></div>
            <img src="LOGO.PNG" alt="COPOM Logo" class="copom-logo">
            <h1>Atendimento</h1>
            <form id="attendanceForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="telefone">Telefone</label>
                        <input type="text" id="telefone" required>
                    </div>
                    <div class="form-group">
                        <label for="nomeAtendimento">Nome</label>
                        <input type="text" id="nomeAtendimento" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="cep">CEP</label>
                        <input type="text" id="cep" maxlength="9" required>
                    </div>
                    <div class="form-group">
                        <label for="rua">Rua</label>
                        <input type="text" id="rua" required>
                    </div>
                    <div class="form-group">
                        <label for="numero">N√∫mero</label>
                        <input type="text" id="numero" required>
                    </div>
                    <div class="form-group">
                        <label for="bairro">Bairro</label>
                        <input type="text" id="bairro" required>
                    </div>
                    <div class="form-group">
                        <label for="municipio">Munic√≠pio</label>
                        <input type="text" id="municipio" required>
                    </div>
                    <div class="form-group">
                        <label for="estado">Estado</label>
                        <input type="text" id="estado" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="btl">BTL</label>
                        <select id="btl" required>
                            <option value="">Selecione...</option>
                            <option value="01¬∫ BPM/M">01¬∫ BPM/M</option>
                            <option value="02¬∫ BPM/M">02¬∫ BPM/M</option>
                            <option value="03¬∫ BPM/M">03¬∫ BPM/M</option>
                            <option value="04¬∫ BPM/M">04¬∫ BPM/M</option>
                            <option value="05¬∫ BPM/M">05¬∫ BPM/M</option>
                            <option value="06¬∫ BPM/M">06¬∫ BPM/M</option>
                            <option value="07¬∫ BPM/M">07¬∫ BPM/M</option>
                            <option value="08¬∫ BPM/M">08¬∫ BPM/M</option>
                            <option value="09¬∫ BPM/M">09¬∫ BPM/M</option>
                            <option value="10¬∫ BPM/M">10¬∫ BPM/M</option>
                            <option value="11¬∫ BPM/M">11¬∫ BPM/M</option>
                            <option value="12¬∫ BPM/M">12¬∫ BPM/M</option>
                            <option value="13¬∫ BPM/M">13¬∫ BPM/M</option>
                            <option value="14¬∫ BPM/M">14¬∫ BPM/M</option>
                            <option value="15¬∫ BPM/M">15¬∫ BPM/M</option>
                            <option value="16¬∫ BPM/M">16¬∫ BPM/M</option>
                            <option value="17¬∫ BPM/M">17¬∫ BPM/M</option>
                            <option value="18¬∫ BPM/M">18¬∫ BPM/M</option>
                            <option value="19¬∫ BPM/M">19¬∫ BPM/M</option>
                            <option value="20¬∫ BPM/M">20¬∫ BPM/M</option>
                            <option value="21¬∫ BPM/M">21¬∫ BPM/M</option>
                            <option value="22¬∫ BPM/M">22¬∫ BPM/M</option>
                            <option value="23¬∫ BPM/M">23¬∫ BPM/M</option>
                            <option value="24¬∫ BPM/M">24¬∫ BPM/M</option>
                            <option value="25¬∫ BPM/M">25¬∫ BPM/M</option>
                            <option value="26¬∫ BPM/M">26¬∫ BPM/M</option>
                            <option value="27¬∫ BPM/M">27¬∫ BPM/M</option>
                            <option value="28¬∫ BPM/M">28¬∫ BPM/M</option>
                            <option value="29¬∫ BPM/M">29¬∫ BPM/M</option>
                            <option value="30¬∫ BPM/M">30¬∫ BPM/M</option>
                            <option value="31¬∫ BPM/M">31¬∫ BPM/M</option>
                            <option value="32¬∫ BPM/M">32¬∫ BPM/M</option>
                            <option value="33¬∫ BPM/M">33¬∫ BPM/M</option>
                            <option value="35¬∫ BPM/M">35¬∫ BPM/M</option>
                            <option value="36¬∫ BPM/M">36¬∫ BPM/M</option>
                            <option value="37¬∫ BPM/M">37¬∫ BPM/M</option>
                            <option value="38¬∫ BPM/M">38¬∫ BPM/M</option>
                            <option value="39¬∫ BPM/M">39¬∫ BPM/M</option>
                            <option value="43¬∫ BPM/M">43¬∫ BPM/M</option>
                            <option value="46¬∫ BPM/M">46¬∫ BPM/M</option>
                            <option value="48¬∫ BPM/M">48¬∫ BPM/M</option>
                            <option value="49¬∫ BPM/M">49¬∫ BPM/M</option>
                        </select>
                        <div id="btlCoordinates" style="margin-top: 5px; font-size: 12px; color: #1976d2; font-weight: 600;"></div>
                        <div id="btlStatus" style="margin-top: 5px; font-size: 12px; color: #666;"></div>
                        <div id="btlMap" style="height: 250px; width: 100%; margin-top: 10px; display: none; border-radius: 4px; border: 1px solid #ddd; z-index: 1;"></div>
                    </div>
                    <div class="form-group">
                        <label for="referencia">Refer√™ncia</label>
                        <input type="text" id="referencia" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="historico">Hist√≥rico</label>
                    <textarea id="historico" rows="5" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="natureza">Natureza</label>
                        <select id="natureza" required>
                            <option value="">Selecione...</option>
                            <option value="C04 - DESINTELIG√äNCIA">C04 - DESINTELIG√äNCIA</option>
                            <option value="A98 - VIOL√äNCIA DOM√âSTICA">A98 - VIOL√äNCIA DOM√âSTICA</option>
                            <option value="B04 - ROUBO">B04 - ROUBO</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="gravidade">Gravidade</label>
                        <select id="gravidade" required>
                            <option value="">Selecione...</option>
                            <option value="URGENTE">URGENTE</option>
                            <option value="NORMAL">NORMAL</option>
                            <option value="SOP">SOP</option>
                        </select>
                    </div>
                </div>
                
                <div class="button-group" style="display: flex; gap: 10px; margin-top: 15px;">
                    <button type="button" id="btnVeiculos" class="btn-secondary">Ve√≠culos</button>
                    <button type="button" id="btnPessoas" class="btn-secondary">Pessoas</button>
                    <button type="button" id="btnImei" class="btn-secondary">IMEI</button>
                    <button type="submit" class="btn-cadastro">Gerar Ocorr√™ncia</button>
                    <button type="button" id="btnMinhasOcorrencias" class="btn-secondary">Minha Ocorr√™ncias</button>
                    <button type="button" id="btnPesquisarOcorrencias" class="btn-secondary">Pesquisar Ocorr√™ncias</button>
                </div>
                
                <!-- Ve√≠culos Section -->
                <div id="veiculosSection" style="display: none; margin-top: 20px; padding: 20px; background: #f9f9f9; border: 1px solid #ddd; border-radius: 4px;">
                    <h3>Dados do Ve√≠culo</h3>
                    <div class="form-group">
                        <label for="placa">Placa</label>
                        <input type="text" id="placa" maxlength="8" placeholder="ABC1234 ou ABC1D23">
                    </div>
                    <div class="form-group">
                        <label for="modelo">Modelo</label>
                        <input type="text" id="modelo">
                    </div>
                    <div class="form-group">
                        <label for="ano">Ano</label>
                        <input type="text" id="ano" maxlength="4">
                    </div>
                    <div class="form-group">
                        <label for="cor">Cor</label>
                        <input type="text" id="cor">
                    </div>
                    <div class="form-group">
                        <label for="tipoVeiculo">Tipo</label>
                        <input type="text" id="tipoVeiculo" placeholder="Ex: AUTOM√ìVEL, MOTOCICLETA">
                    </div>
                    <div class="form-group">
                        <label for="estadoVeiculo">Estado</label>
                        <input type="text" id="estadoVeiculo" maxlength="2" placeholder="Ex: MG, SP">
                    </div>
                    <div class="form-group">
                        <label for="situacaoVeiculo">Situa√ß√£o</label>
                        <select id="situacaoVeiculo">
                            <option value="">Selecione...</option>
                            <option value="FURTO">FURTO</option>
                            <option value="ROUBO">ROUBO</option>
                            <option value="A√á√ÉO CRIMINOSA">A√á√ÉO CRIMINOSA</option>
                            <option value="ACIDENTE DE TR√ÇNSITO">ACIDENTE DE TR√ÇNSITO</option>
                        </select>
                    </div>
                    <button type="button" id="btnAdicionarVeiculo" class="btn-cadastro">Adicionar Ve√≠culo</button>
                    <div id="veiculosAdicionados" style="margin-top: 15px;"></div>
                </div>
                
                <!-- Pessoas Section -->
                <div id="pessoasSection" style="display: none; margin-top: 20px; padding: 20px; background: #f9f9f9; border: 1px solid #ddd; border-radius: 4px;">
                    <h3>Dados da Pessoa</h3>
                    <div class="form-group">
                        <label for="nomePessoa">Nome</label>
                        <input type="text" id="nomePessoa">
                    </div>
                    <div class="form-group">
                        <label for="cpfPessoa">CPF</label>
                        <input type="text" id="cpfPessoa" maxlength="14">
                    </div>
                    <div class="form-group">
                        <label for="dataNascimento">Data de Nascimento</label>
                        <input type="date" id="dataNascimento">
                    </div>
                    <div class="form-group">
                        <label for="telefonePessoa">Telefone</label>
                        <input type="text" id="telefonePessoa">
                    </div>
                    <div class="form-group">
                        <label for="envolvimento">Envolvimento</label>
                        <select id="envolvimento">
                            <option value="">Selecione...</option>
                            <option value="V√çTIMA">V√çTIMA</option>
                            <option value="AUTOR">AUTOR</option>
                            <option value="TESTEMUNHA">TESTEMUNHA</option>
                            <option value="CONDUTOR">CONDUTOR</option>
                        </select>
                    </div>
                    <button type="button" id="btnAdicionarPessoa" class="btn-cadastro">Adicionar Pessoa</button>
                    <div id="pessoasAdicionadas" style="margin-top: 15px;"></div>
                </div>
                
                <!-- IMEI Section -->
                <div id="imeiSection" style="display: none; margin-top: 20px; padding: 20px; background: #f9f9f9; border: 1px solid #ddd; border-radius: 4px;">
                    <h3>Dados do IMEI</h3>
                    <div class="form-group">
                        <label for="imeiInput">N√∫mero IMEI (15 d√≠gitos)</label>
                        <input type="text" id="imeiInput" maxlength="15">
                    </div>
                    <div class="form-group">
                        <label for="situacaoImei">Situa√ß√£o</label>
                        <select id="situacaoImei">
                            <option value="">Selecione...</option>
                            <option value="FURTO">FURTO</option>
                            <option value="ROUBO">ROUBO</option>
                            <option value="EXTRAVIO">EXTRAVIO</option>
                        </select>
                    </div>
                    <button type="button" id="btnAdicionarImei" class="btn-cadastro">Adicionar IMEI</button>
                    <div id="imeisAdicionados" style="margin-top: 15px;"></div>
                </div>
                
            </form>
            <div id="attendanceMessage" class="message"></div>
            
            <!-- Occurrences List -->
            <div id="ocorrenciasList" style="display: none; margin-top: 20px;">
                <h2>Minhas Ocorr√™ncias (√öltimas 7h)</h2>
                <div id="ocorrenciasContent"></div>
                <button id="btnCloseOcorrencias" class="btn-secondary" style="margin-top: 10px;">Fechar</button>
            </div>
            
            <!-- Search Occurrences -->
            <div id="ocorrenciasSearchList" style="display: none; margin-top: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h2 style="margin: 0;">Pesquisar Ocorr√™ncias</h2>
                    <button id="btnToggleSearchForm" class="btn-secondary" style="padding: 8px 16px; font-size: 14px;">+ Expandir</button>
                </div>
                <div id="searchFormContainer" style="display: none;">
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="searchOcorrenciasInput" placeholder="Digite endere√ßo ou natureza..." style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; margin-bottom: 10px;">
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 14px; font-weight: 600;">Data/Hora In√≠cio</label>
                                <input type="datetime-local" id="searchDataInicio" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 14px; font-weight: 600;">Data/Hora Fim</label>
                                <input type="datetime-local" id="searchDataFim" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                            <button id="btnFiltroHoje" class="btn-secondary" style="flex: 1;">Hoje</button>
                            <button id="btnFiltroOntem" class="btn-secondary" style="flex: 1;">Ontem</button>
                            <button id="btnFiltroSemana" class="btn-secondary" style="flex: 1;">√öltima Semana</button>
                            <button id="btnFiltroMes" class="btn-secondary" style="flex: 1;">√öltimo M√™s</button>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button id="btnExecutarPesquisa" class="btn-cadastro" style="flex: 1;">Pesquisar</button>
                            <button id="btnLimparPesquisa" class="btn-secondary" style="flex: 1;">Limpar</button>
                            <button id="btnGerarPDF" class="btn-secondary" style="flex: 1; display: none;">Gerar PDF</button>
                        </div>
                    </div>
                </div>
                <div id="ocorrenciasSearchContent"></div>
                <button id="btnCloseOcorrenciasSearch" class="btn-secondary" style="margin-top: 10px;">Fechar</button>
            </div>
            
            <button id="btnBackFromAttendance" class="btn-secondary" style="margin-top: 20px;">Voltar</button>
        </div>
    </div>
    <script type="module" src="app.js"></script>
</body>
</html>
